<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BiteLing - Watch</title>
    <link rel="icon" type="image/svg+xml" href="../assets/favicon.svg">
    <link rel="stylesheet" href="../css/watch.css">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p class="loading-text">Loading videos...</p>
        </div>
    </div>

    <!-- Video Feed Container -->
    <div class="feed-container" id="feedContainer">
        <!-- Video will be inserted here -->
    </div>

    <!-- Top Overlay -->
    <div class="top-overlay">
        <button class="close-button" onclick="window.location.href='../index.html'">âœ•</button>
        <div class="hsk-badge" id="hskBadge">HSK 1</div>
        <div class="cookies-display">ğŸª <span id="cookiesCount">0</span></div>
    </div>


    <!-- Side Actions -->
    <div class="side-actions">
        <button class="action-btn replay-btn" id="replayBtn" title="Replay video">
            <span class="action-icon">ğŸ”„</span>
        </button>
        <button class="action-btn transcript-btn" id="transcriptBtn" title="Show transcript">
            <span class="action-icon">ğŸ“</span>
        </button>
    </div>

    <!-- Transcript Panel -->
    <div class="transcript-panel hidden" id="transcriptPanel">
        <div class="transcript-header">
            <h3>Transcript</h3>
            <button class="transcript-close-btn" id="transcriptCloseBtn">âœ•</button>
        </div>
        <div class="transcript-content" id="transcriptContent">
            <div class="transcript-loading">Loading transcript...</div>
        </div>
    </div>

    <!-- Dictionary Popup (for transcript word clicks) -->
    <div class="dict-popup hidden" id="dictPopup">
        <div class="dict-popup-content">
            <button class="dict-close-btn" id="dictCloseBtn">âœ•</button>
            <div class="dict-word" id="dictWord">å­—</div>
            <div class="dict-pinyin" id="dictPinyin">zÃ¬</div>
            <div class="dict-definition" id="dictDefinition">character; word</div>
            <button class="add-to-srs-btn" id="addToSRSBtn">Add to SRS</button>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="scroll-indicator" id="scrollIndicator">
        <div class="scroll-text">Scroll up for next video</div>
        <div class="scroll-arrow">â†‘</div>
    </div>

    <!-- Cookie Warning -->
    <div class="cookie-warning hidden" id="cookieWarning">
        <div class="warning-content">
            <span class="warning-icon">ğŸª</span>
            <p>Not enough cookies! Complete reviews to earn more.</p>
            <button onclick="window.location.href='../index.html'">Go to Reviews</button>
        </div>
    </div>

    <!-- YouTube IFrame API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <!-- Vercel environment variables (auto-generated at build time) -->
    <script src="../env-config.js" onerror="this.remove()"></script>
    <!-- Load template config, then local config overrides it -->
    <script src="../config/youtube-config.js"></script>
    <script src="../config/youtube-config.local.js" onerror="this.remove()"></script>
    <!-- Firebase & User Data -->
    <script src="../config/firebase-config.js"></script>
    <script src="../config/firebase-config.local.js" onerror="this.remove()"></script>
    <!-- Word Dictionary -->
    <script src="../js/dictionary.js"></script>
    <script type="module" src="../js/watch.js"></script>
</body>
</html>
